(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b3f62a0e"],{"0911":function(t,n,e){t.exports=e.p+"img/board.4b70e50d.png"},"13d5":function(t,n,e){"use strict";var a=e("23e7"),i=e("d58f").left,r=e("b301");a({target:"Array",proto:!0,forced:r("reduce")},{reduce:function(t){return i(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"26e9":function(t,n,e){"use strict";var a=e("23e7"),i=e("e8b5"),r=[].reverse,o=[1,2];a({target:"Array",proto:!0,forced:String(o)===String(o.reverse())},{reverse:function(){return i(this)&&(this.length=this.length),r.call(this)}})},"53fc":function(t,n,e){"use strict";e.r(n);var a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("section",{staticClass:"page-demo"},[e("div",{staticClass:"container"},[e("img",{ref:"table",staticClass:"img-block",attrs:{src:t.board,alt:""}}),e("img",{ref:"pointer",staticClass:"pointer",attrs:{src:t.pointer,alt:""}})]),e("button",{on:{click:t.handleStart}},[t._v("start")]),e("button",{on:{click:t.handleStop}},[t._v("end")]),e("button",{on:{click:t.mockerror}},[t._v("测试异常")])])},i=[],r=e("0911"),o=e.n(r),s=e("fbcf"),u=e.n(s),l=e("a302"),c=e.n(l),f=(e("7db0"),e("4160"),e("d81d"),e("26e9"),e("fb6a"),e("159b"),e("9f12")),h=e("53fe"),g=(e("13d5"),e("a9e3"),function(){function t(){Object(f["a"])(this,t),this._ranges=[],this.add=this.add.bind(this),this.done=this.done.bind(this)}return Object(h["a"])(t,[{key:"add",value:function(t,n){var e=Number(n);if(isNaN(e))throw new Error("所占区间比例rate必须可转为数字;实际:".concat(n));if(e<=0)throw new Error("所占区间比例rate必须大于0;实际".concat(n));this._ranges.push({value:t,rate:e})}},{key:"done",value:function(){var t=Math.random(),n=0,e=this._ranges.reduce((function(t,n){return{rate:t.rate+n.rate}})).rate,a=this._ranges.slice();while(a.length){var i=a.shift(),r=i.value,o=i.rate,s=n+o/e;if(t>=n&&t<s)return r;n=s}}}]),t}()),d=window.requestAnimationFrame||window.webkitRequestAnimationFrame,v=5,p=function(){function t(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.translate,i=void 0===a?function(){return window.console.warn("未添加旋转动画")}:a,r=e.done,o=e.initial,s=e.direction,u=void 0!==s&&s;Object(f["a"])(this,t),this.running=!1,this.waitingToStop=!1,this.angleCount=0,this.frame=0,this.ranges=[],this.initial=0,this.direction=!1,this.translate=i,this.direction=u,this.done=r,this.ranges=this.formatRanges(n,u),this.initial=this.formatInitial(this.ranges,o)}return Object(h["a"])(t,[{key:"start",value:function(){var t=this;if(!this.running){this.running=!0;var n=this.calcSteps(360*(v+1)),e=n(1)-n(0),a=function n(){t.angleCount+=e,t.translate(t.direction?t.angleCount:-t.angleCount),t.frame=d(n)};this.frame=d(a)}}},{key:"stop",value:function(t){var n=this;if(!this.waitingToStop){this.waitingToStop=!0,cancelAnimationFrame(this.frame);var e=this.expectToStop(t),a=this.calcSteps(360*v+e),i=1,r=function t(){var r=a(i++);if(r>-1)n.frame=d((function(){n.angleCount=r,n.translate(n.direction?r:-r),t()}));else{n.running=!1,n.waitingToStop=!1;var o=n.ranges.find((function(t){return t.angleStop===e}));"function"===typeof n.done&&n.done(o&&o.value)}};r()}}},{key:"reset",value:function(){cancelAnimationFrame(this.frame),this.running=!1,this.waitingToStop=!1,this.translate(this.direction?this.initial:-this.initial)}},{key:"calcSteps",value:function(t){var n=this.angleCount%360;t-=n;var e=.03,a=Math.sqrt(2*t/e),i=e*a;return function(r){return r<a?(2*i*r-e*r*r)/2+n:r<a+1?t+n:-1}}},{key:"expectToStop",value:function(t){if(t){var n=this.ranges.find((function(n){return n.value===t}));if(n)return n.angleStop}var e=new g;return this.ranges.forEach((function(t){var n=t.angle,a=t.angleStop;e.add(a,n)})),e.done()}},{key:"formatRanges",value:function(t,n){var e=0,a=t.slice();return n&&t.reverse(),a.map((function(t){var n=t.value,a=t.angle,i=e+a/2;return e+=a,{value:n,angle:a,angleStop:i}}))}},{key:"formatInitial",value:function(t,n){var e=t.find((function(t){return t.value===n}));return e?e.angleStop:"number"===typeof n?n:0}}]),t}(),b={data:function(){return{initial:0,disabled:!1,board:o.a,pointer:u.a,pointer2:c.a,ranges:[{value:"a",angle:15},{value:"谢谢",angle:30},{value:"空1",angle:30},{value:"加油",angle:30},{value:"三",angle:30},{value:"运气",angle:30},{value:"空2",angle:30},{value:"再接再厉",angle:30},{value:"er",angle:30},{value:"zhu nin",angle:30},{value:"kong",angle:30},{value:"buyao",angle:30},{value:"b",angle:15}]}},mounted:function(){var t=this;this.rotate=new p(this.ranges,{translate:function(n){console.log("tranll"),t.$refs.table.style.transform="rotate(".concat(n,"deg)")},initial:20,done:function(t){console.log("end",t)}})},methods:{handleEnd:function(t){console.log(t)},handleStart:function(){this.rotate.start()},handleStop:function(){this.rotate.stop()},mockerror:function(){var t=this;this.handleStart(),setTimeout((function(){console.log("异常啦"),t.rotate.reset()}),2e3)}}},m=b,w=(e("7468"),e("2877")),S=Object(w["a"])(m,a,i,!1,null,"17ab537f",null);n["default"]=S.exports},7468:function(t,n,e){"use strict";var a=e("cce7"),i=e.n(a);i.a},a302:function(t,n,e){t.exports=e.p+"img/pointer@2.edc3b584.png"},cce7:function(t,n,e){},d58f:function(t,n,e){var a=e("1c0b"),i=e("7b0b"),r=e("44ad"),o=e("50c4"),s=function(t){return function(n,e,s,u){a(e);var l=i(n),c=r(l),f=o(l.length),h=t?f-1:0,g=t?-1:1;if(s<2)while(1){if(h in c){u=c[h],h+=g;break}if(h+=g,t?h<0:f<=h)throw TypeError("Reduce of empty array with no initial value")}for(;t?h>=0:f>h;h+=g)h in c&&(u=e(u,c[h],h,l));return u}};t.exports={left:s(!1),right:s(!0)}},fbcf:function(t,n,e){t.exports=e.p+"img/pointer.cd196f25.png"}}]);